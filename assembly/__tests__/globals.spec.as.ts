import { __mulmod256, __res128_hi, __umulq128, __umulq64 } from "../globals";
import { u128 } from "../integer/u128";
import { u256 } from "../integer/u256";

describe("utils", () => {
  it("Should multiply two u64s", () => {
    let a = 894573984578937543;
    let b = 5234928348921734986;
    expect(__umulq64(a, b)).toStrictEqual(1659368200785124998);
    expect(__res128_hi).toStrictEqual(253867603592682150);
  });

  it("Should multiply two u128s", () => {
    let a = new u128(3564734576245623462, 4356234651346245624);
    let b = new u128(3567436573456234652, 3456345634564356647);
    expect(__umulq128(a.lo, a.hi, b.lo, b.hi)).toStrictEqual(
      new u256(
        1024920563200249128,
        11333526942115064091,
        16841642531708875241,
        816222774065448274
      )
    );
  });

  it("Should mulmod two u256s", () => {
    expect(
      __mulmod256(
        1024920563200249128,
        11333526942115064091,
        16841642531708875241,
        816222774065448274,

        5983120865519178024,
        9049990759167458388,
        8774107221600584589,
        853598558165740058,

        7251781585283820094,
        4681753316874427490,
        13650534122082292863,
        381511503370406394
      )
    ).toStrictEqual(
      new u256(
        904691541117346170,
        7032526575705796261,
        3462287460550431807,
        45797578918797254
      )
    );
  });
});
